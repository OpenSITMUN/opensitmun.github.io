<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2493px" preserveAspectRatio="none" style="width:1766px;height:2493px;background:#FFFFFF;" version="1.1" viewBox="0 0 1766 2493" width="1766px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="1294.9063" style="stroke:#000000;stroke-width:1.5;" width="1418" x="333.5" y="911.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="33" x2="33" y1="81.2969" y2="2412.6797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="155" x2="155" y1="81.2969" y2="2412.6797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="417.5" x2="417.5" y1="81.2969" y2="2412.6797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="690.5" x2="690.5" y1="81.2969" y2="2412.6797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="950.5" x2="950.5" y1="81.2969" y2="2412.6797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1107" x2="1107" y1="81.2969" y2="2412.6797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1217.5" x2="1217.5" y1="81.2969" y2="2412.6797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1367.5" x2="1367.5" y1="81.2969" y2="2412.6797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1487.5" x2="1487.5" y1="81.2969" y2="2412.6797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1591.5" x2="1591.5" y1="81.2969" y2="2412.6797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1707.5" x2="1707.5" y1="81.2969" y2="2412.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="5" y="77.9951">Usuario</text><ellipse cx="33.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M33.5,21.5 L33.5,48.5 M20.5,29.5 L46.5,29.5 M33.5,48.5 L20.5,63.5 M33.5,48.5 L46.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="5" y="2424.6748">Usuario</text><ellipse cx="33.5" cy="2436.4766" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M33.5,2444.4766 L33.5,2471.4766 M20.5,2452.4766 L46.5,2452.4766 M33.5,2471.4766 L20.5,2486.4766 M33.5,2471.4766 L46.5,2486.4766 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123" x="94" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="101" y="69.9951">Visor de mapas</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123" x="94" y="2411.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="101" y="2431.6748">Visor de mapas</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="343.5" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="134" x="350.5" y="53.6982">«@RestController»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="397.5" y="69.9951">Proxy</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="343.5" y="2411.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="134" x="350.5" y="2431.6748">«@RestController»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="397.5" y="2447.9717">Proxy</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="616.5" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="134" x="623.5" y="53.6982">«@RestController»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="628" y="69.9951">Configuration API</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="616.5" y="2411.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="134" x="623.5" y="2431.6748">«@RestController»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="628" y="2447.9717">Configuration API</text><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="883.5" y="17.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="896.5" y="37.4014">Authentication</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="910" y="53.6982">Entry Point</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="890.5" y="69.9951">(Spring Security)</text><rect fill="#E2E2F0" height="62.8906" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="883.5" y="2411.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="896.5" y="2431.6748">Authentication</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="910" y="2447.9717">Entry Point</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="890.5" y="2464.2686">(Spring Security)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="1059" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="1086.5" y="53.6982">Filtro</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1066" y="69.9951">middleware</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="1059" y="2411.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="1086.5" y="2431.6748">Filtro</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1066" y="2447.9717">middleware</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="1175.5" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="1182.5" y="53.6982">Utilidades</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="1204" y="69.9951">JWT</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="1175.5" y="2411.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="1182.5" y="2431.6748">Utilidades</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="1204" y="2447.9717">JWT</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="1299.5" y="33.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1306.5" y="53.6982">Security Context</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="1307.5" y="69.9951">(Spring Security)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="1299.5" y="2411.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1306.5" y="2431.6748">Security Context</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="1307.5" y="2447.9717">(Spring Security)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1445.5" y="77.9951">BD SITMUN</text><path d="M1469.5,29 C1469.5,19 1487.5,19 1487.5,19 C1487.5,19 1505.5,19 1505.5,29 L1505.5,55 C1505.5,65 1487.5,65 1487.5,65 C1487.5,65 1469.5,65 1469.5,55 L1469.5,29 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1469.5,29 C1469.5,39 1487.5,39 1487.5,39 C1487.5,39 1505.5,39 1505.5,29 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1445.5" y="2424.6748">BD SITMUN</text><path d="M1469.5,2437.9766 C1469.5,2427.9766 1487.5,2427.9766 1487.5,2427.9766 C1487.5,2427.9766 1505.5,2427.9766 1505.5,2437.9766 L1505.5,2463.9766 C1505.5,2473.9766 1487.5,2473.9766 1487.5,2473.9766 C1487.5,2473.9766 1469.5,2473.9766 1469.5,2463.9766 L1469.5,2437.9766 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1469.5,2437.9766 C1469.5,2447.9766 1487.5,2447.9766 1487.5,2447.9766 C1487.5,2447.9766 1505.5,2447.9766 1505.5,2437.9766 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="1539.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1546.5" y="69.9951">WMS Público</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="1539.5" y="2411.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1546.5" y="2431.6748">WMS Público</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106" x="1654.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="1661.5" y="69.9951">WMS Privado</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="106" x="1654.5" y="2411.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92" x="1661.5" y="2431.6748">WMS Privado</text><rect fill="none" height="39.1016" style="stroke:#000000;stroke-width:1.5;" width="1530.5" x="2" y="91.2969"/><path d="M2,91.2969 L70,91.2969 L70,98.2969 L60,108.2969 L2,108.2969 L2,91.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23" x="15" y="105.3638">ref</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="194" x="670.25" y="123.4355">Proceso de login y config. inicial</text><path d="M90,140.3984 L90,210.3984 L755,210.3984 L755,150.3984 L745,140.3984 L90,140.3984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M745,140.3984 L745,150.3984 L755,150.3984 L745,140.3984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="430" x="198.25" y="157.4653">La info de config. devuelta incluye, para WMS públicos (y similares)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="436" x="198.25" y="172.5981">su URL pública, y para los WMS privados (y similares) una URL única</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="220" x="198.25" y="187.731">para cada servicio que pasa por el</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="133" x="422.25" y="187.731">proxy middleware</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="555.25" y="187.731">, pero</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="322" x="198.25" y="202.8638">que para el cliente es una URL de un WMS normal.</text><line style="stroke:#181818;stroke-width:1.0;" x1="153.5" x2="143.5" y1="237.0625" y2="233.0625"/><line style="stroke:#181818;stroke-width:1.0;" x1="153.5" x2="143.5" y1="237.0625" y2="241.0625"/><line style="stroke:#181818;stroke-width:1.0;" x1="33.5" x2="154.5" y1="237.0625" y2="237.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="40.5" y="231.9966">Refresca mapa</text><line style="stroke:#181818;stroke-width:1.0;" x1="155.5" x2="197.5" y1="376.1914" y2="376.1914"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="197.5" y1="376.1914" y2="389.1914"/><line style="stroke:#181818;stroke-width:1.0;" x1="156.5" x2="197.5" y1="389.1914" y2="389.1914"/><line style="stroke:#181818;stroke-width:1.0;" x1="156.5" x2="166.5" y1="389.1914" y2="385.1914"/><line style="stroke:#181818;stroke-width:1.0;" x1="156.5" x2="166.5" y1="389.1914" y2="393.1914"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="162.5" y="371.1255">Carga una capa de un WMS público</text><path d="M399,250.0625 L399,502.0625 L874,502.0625 L874,260.0625 L864,250.0625 L399,250.0625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M864,250.0625 L864,260.0625 L874,260.0625 L864,250.0625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="405" y="267.1294">new ImageLayer({</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="417" y="282.2622">source: new ImageWMS({</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="425" y="297.395">url: 'https://publico.es/cartography/6',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="263" x="425" y="312.5278">params: {'LAYERS': 'diba1,diba2,diba3'},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="425" y="327.6606">serverType: 'geoserver',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="417" y="342.7935">}),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="409" y="357.9263">}),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="405" y="373.0591"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="409" y="388.1919">No debe añadir los parámetros 'terrId' y 'appId'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="377" x="409" y="403.3247">ya que pueden no estar soportados por el servicio remoto.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="321" x="409" y="418.4575">Tampoco debe añadir en la cabecera el TokenJWT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="450" x="409" y="433.5903">El token será ignorado en un WMS público, pero para evitar problemas</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="409" y="448.7231">el token no tiene que ir siempre.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="392" x="409" y="463.856">Se puede añadir solo si las peticiones están dirigidas al proxy</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="446" x="409" y="478.9888">Esta información puede ser proporcionada por el API de configuración</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="409" y="494.1216">mediante un valor booleano asociado a la URL.</text><line style="stroke:#181818;stroke-width:1.0;" x1="1590" x2="1580" y1="528.3203" y2="524.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="1590" x2="1580" y1="528.3203" y2="532.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="155.5" x2="1591" y1="528.3203" y2="528.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="162.5" y="523.2544">GetMap</text><line style="stroke:#181818;stroke-width:1.0;" x1="156.5" x2="166.5" y1="557.4531" y2="553.4531"/><line style="stroke:#181818;stroke-width:1.0;" x1="156.5" x2="166.5" y1="557.4531" y2="561.4531"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="155.5" x2="1591" y1="557.4531" y2="557.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="172.5" y="552.3872">Imagen de mapa pedida</text><line style="stroke:#181818;stroke-width:1.0;" x1="155.5" x2="197.5" y1="689.0156" y2="689.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="197.5" x2="197.5" y1="689.0156" y2="702.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="156.5" x2="197.5" y1="702.0156" y2="702.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="156.5" x2="166.5" y1="702.0156" y2="698.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="156.5" x2="166.5" y1="702.0156" y2="706.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="162.5" y="683.9497">Carga una capa de un WMS restringido</text><path d="M422,570.4531 L422,806.4531 L1014,806.4531 L1014,580.4531 L1004,570.4531 L422,570.4531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1004,570.4531 L1004,580.4531 L1014,580.4531 L1004,570.4531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="349" x="428" y="587.52">Por la configuración previamente recibida ya sabe que</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="502" x="428" y="602.6528">https://proxy/7/5/cartography/23 es el endpoint de un OGC WMS que devuelve</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="345" x="428" y="617.7856">una cartografía para una aplicacion (7) y territorio (5).</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="332" x="428" y="632.9185">Debe además usar LAYERS=default para obtenerla.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="428" y="648.0513"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="428" y="663.1841">Este podría ser el código</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="428" y="678.3169">new ImageLayer({</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="440" y="693.4497">source: new ImageWMS({</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="448" y="708.5825">url: 'https://proxy/7/5/cartography/23',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="448" y="723.7153">params: {'LAYERS': 'default},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="448" y="738.8481">serverType: 'geoserver',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="440" y="753.981">}),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="14" x="432" y="769.1138">})</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="428" y="784.2466"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="563" x="432" y="799.3794">Además debe añadir en la cabecera el TokenJWT porque una bandera se lo ha indicado.</text><line style="stroke:#181818;stroke-width:1.0;" x1="415.5" x2="405.5" y1="844.1445" y2="840.1445"/><line style="stroke:#181818;stroke-width:1.0;" x1="415.5" x2="405.5" y1="844.1445" y2="848.1445"/><line style="stroke:#181818;stroke-width:1.0;" x1="155.5" x2="416.5" y1="844.1445" y2="844.1445"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="162.5" y="839.0786">GetMap</text><path d="M422,817.4453 L422,857.4453 L838,857.4453 L838,827.4453 L828,817.4453 L422,817.4453 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M828,817.4453 L828,827.4453 L838,827.4453 L828,817.4453 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="395" x="428" y="834.5122">GET /proxy/{appId}/{terId}/{type}/{typeId}?{mapParams}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="428" y="849.645">Authorization: Bearer TokenJWT</text><line style="stroke:#181818;stroke-width:1.0;" x1="417.5" x2="459.5" y1="883.8438" y2="883.8438"/><line style="stroke:#181818;stroke-width:1.0;" x1="459.5" x2="459.5" y1="883.8438" y2="896.8438"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="459.5" y1="896.8438" y2="896.8438"/><polygon fill="#181818" points="428.5,892.8438,418.5,896.8438,428.5,900.8438,424.5,896.8438" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="424.5" y="878.7778">Configuración en cache?</text><path d="M333.5,911.8438 L399.5,911.8438 L399.5,918.9766 L389.5,928.9766 L333.5,928.9766 L333.5,911.8438 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1294.9063" style="stroke:#000000;stroke-width:1.5;" width="1418" x="333.5" y="911.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="348.5" y="924.9106">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="341" x="414.5" y="924.0542">[Hay una configuración válida reusable en la cache]</text><line style="stroke:#181818;stroke-width:1.0;" x1="417.5" x2="459.5" y1="950.1094" y2="950.1094"/><line style="stroke:#181818;stroke-width:1.0;" x1="459.5" x2="459.5" y1="950.1094" y2="963.1094"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="459.5" y1="963.1094" y2="963.1094"/><polygon fill="#181818" points="428.5,959.1094,418.5,963.1094,428.5,967.1094,424.5,963.1094" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="259" x="424.5" y="945.0435">Configuración (JSON) = Sacar de cache()</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="333.5" x2="1751.5" y1="972.1094" y2="972.1094"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="291" x="338.5" y="982.3198">[No hay configuración reusable en la cache]</text><line style="stroke:#181818;stroke-width:1.0;" x1="688.5" x2="678.5" y1="1108.4102" y2="1104.4102"/><line style="stroke:#181818;stroke-width:1.0;" x1="688.5" x2="678.5" y1="1108.4102" y2="1112.4102"/><line style="stroke:#181818;stroke-width:1.0;" x1="417.5" x2="689.5" y1="1108.4102" y2="1108.4102"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="424.5" y="1103.3442">GetConfiguration</text><path d="M695,990.9141 L695,1211.9141 L921,1211.9141 L921,1000.9141 L911,990.9141 L695,990.9141 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M911,990.9141 L911,1000.9141 L921,1000.9141 L911,990.9141 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="701" y="1007.981">POST /api/config/proxy</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="701" y="1023.1138">Host: backend</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="701" y="1038.2466">X-sitmun-proxy: MiddlewareKey</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="701" y="1053.3794">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="709" y="1068.5122">&quot;type&quot; : &quot;{type}&quot;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="709" y="1083.645">&quot;typeId&quot; : {typeId},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="709" y="1098.7778">&quot;terrId&quot; : {terId},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="709" y="1113.9106">&quot;appId&quot; : {appId},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="709" y="1129.0435">&quot;method&quot; : &quot;GET&quot;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="709" y="1144.1763">&quot;parameters&quot; : {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="725" y="1159.3091">mapParams</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="13" x="709" y="1174.4419">},</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="709" y="1189.5747">&quot;token&quot; : &quot;{tokenJWT}&quot;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="701" y="1204.7075">}</text><line style="stroke:#181818;stroke-width:1.0;" x1="948.5" x2="938.5" y1="1223.7734" y2="1219.7734"/><line style="stroke:#181818;stroke-width:1.0;" x1="948.5" x2="938.5" y1="1223.7734" y2="1227.7734"/><line style="stroke:#181818;stroke-width:1.0;" x1="690.5" x2="949.5" y1="1223.7734" y2="1223.7734"/><line style="stroke:#181818;stroke-width:1.0;" x1="1105.5" x2="1095.5" y1="1252.9063" y2="1248.9063"/><line style="stroke:#181818;stroke-width:1.0;" x1="1105.5" x2="1095.5" y1="1252.9063" y2="1256.9063"/><line style="stroke:#181818;stroke-width:1.0;" x1="950.5" x2="1106.5" y1="1252.9063" y2="1252.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="957.5" y="1247.8403">Filtra petición</text><line style="stroke:#181818;stroke-width:1.0;" x1="1107.5" x2="1149.5" y1="1297.1719" y2="1297.1719"/><line style="stroke:#181818;stroke-width:1.0;" x1="1149.5" x2="1149.5" y1="1297.1719" y2="1310.1719"/><line style="stroke:#181818;stroke-width:1.0;" x1="1108.5" x2="1149.5" y1="1310.1719" y2="1310.1719"/><line style="stroke:#181818;stroke-width:1.0;" x1="1108.5" x2="1118.5" y1="1310.1719" y2="1306.1719"/><line style="stroke:#181818;stroke-width:1.0;" x1="1108.5" x2="1118.5" y1="1310.1719" y2="1314.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="1114.5" y="1276.9731">MiddlewareKey</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="1114.5" y="1292.106">conocida?</text><path d="M1222,1276.9727 L1222,1301.9727 L1461,1301.9727 L1461,1286.9727 L1451,1276.9727 L1222,1276.9727 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1451,1276.9727 L1451,1286.9727 L1461,1286.9727 L1451,1276.9727 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="1228" y="1294.0396">Si no se verifica 401 Unauthorized</text><line style="stroke:#181818;stroke-width:1.0;" x1="1365.5" x2="1355.5" y1="1339.3047" y2="1335.3047"/><line style="stroke:#181818;stroke-width:1.0;" x1="1365.5" x2="1355.5" y1="1339.3047" y2="1343.3047"/><line style="stroke:#181818;stroke-width:1.0;" x1="1107.5" x2="1366.5" y1="1339.3047" y2="1339.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="1114.5" y="1334.2388">set(Autenticación(&quot;proxy&quot;, [PROXY]))</text><line style="stroke:#181818;stroke-width:1.0;" x1="951.5" x2="961.5" y1="1353.3047" y2="1349.3047"/><line style="stroke:#181818;stroke-width:1.0;" x1="951.5" x2="961.5" y1="1353.3047" y2="1357.3047"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="950.5" x2="1106.5" y1="1353.3047" y2="1353.3047"/><line style="stroke:#181818;stroke-width:1.0;" x1="1365.5" x2="1355.5" y1="1382.4375" y2="1378.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1365.5" x2="1355.5" y1="1382.4375" y2="1386.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="950.5" x2="1366.5" y1="1382.4375" y2="1382.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="957.5" y="1377.3716">contexto seguridad?</text><line style="stroke:#181818;stroke-width:1.0;" x1="951.5" x2="961.5" y1="1411.5703" y2="1407.5703"/><line style="stroke:#181818;stroke-width:1.0;" x1="951.5" x2="961.5" y1="1411.5703" y2="1415.5703"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="950.5" x2="1366.5" y1="1411.5703" y2="1411.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="967.5" y="1406.5044">contexto actual</text><line style="stroke:#181818;stroke-width:1.0;" x1="950.5" x2="992.5" y1="1467.4688" y2="1467.4688"/><line style="stroke:#181818;stroke-width:1.0;" x1="992.5" x2="992.5" y1="1467.4688" y2="1480.4688"/><line style="stroke:#181818;stroke-width:1.0;" x1="951.5" x2="992.5" y1="1480.4688" y2="1480.4688"/><line style="stroke:#181818;stroke-width:1.0;" x1="951.5" x2="961.5" y1="1480.4688" y2="1476.4688"/><line style="stroke:#181818;stroke-width:1.0;" x1="951.5" x2="961.5" y1="1480.4688" y2="1484.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="957.5" y="1447.27">verificar contexto</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="957.5" y="1462.4028">actual tiene rol PROXY</text><path d="M1112,1424.5703 L1112,1494.5703 L1398,1494.5703 L1398,1434.5703 L1388,1424.5703 L1112,1424.5703 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1388,1424.5703 L1388,1434.5703 L1398,1434.5703 L1388,1424.5703 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244" x="1118" y="1441.6372">método asociado a &quot;/api/config/proxy&quot;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="1118" y="1456.77">solo puede ser accedido con el rol PROXY</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="1118" y="1471.9028">por la configuración de seguridad</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="1118" y="1487.0356">Si no se verifica 401 Unauthorized</text><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="701.5" y1="1531.8008" y2="1527.8008"/><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="701.5" y1="1531.8008" y2="1535.8008"/><line style="stroke:#181818;stroke-width:1.0;" x1="690.5" x2="949.5" y1="1531.8008" y2="1531.8008"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="707.5" y="1526.7349">getProxyConfiguration(UserRequest)</text><path d="M955,1505.1016 L955,1545.1016 L1323,1545.1016 L1323,1515.1016 L1313,1505.1016 L955,1505.1016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1313,1505.1016 L1313,1515.1016 L1323,1515.1016 L1313,1505.1016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280" x="961" y="1522.1685">UserRequest es un objeto con propiedades:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="347" x="961" y="1537.3013">type, typeId, method, terrId, appId, parameters, token</text><line style="stroke:#181818;stroke-width:1.0;" x1="1215.5" x2="1205.5" y1="1571.5" y2="1567.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="1215.5" x2="1205.5" y1="1571.5" y2="1575.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="690.5" x2="1216.5" y1="1571.5" y2="1571.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="697.5" y="1566.4341">Validar token JWT</text><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="701.5" y1="1600.6328" y2="1596.6328"/><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="701.5" y1="1600.6328" y2="1604.6328"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="690.5" x2="1216.5" y1="1600.6328" y2="1600.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="707.5" y="1595.5669">Token OK</text><line style="stroke:#181818;stroke-width:1.0;" x1="1215.5" x2="1205.5" y1="1629.7656" y2="1625.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="1215.5" x2="1205.5" y1="1629.7656" y2="1633.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="690.5" x2="1216.5" y1="1629.7656" y2="1629.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="218" x="697.5" y="1624.6997">Extraer &quot;username&quot; del token JWT</text><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="701.5" y1="1658.8984" y2="1654.8984"/><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="701.5" y1="1658.8984" y2="1662.8984"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="690.5" x2="1216.5" y1="1658.8984" y2="1658.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="707.5" y="1653.8325">&quot;username&quot;</text><line style="stroke:#181818;stroke-width:1.0;" x1="690.5" x2="732.5" y1="1692.0977" y2="1692.0977"/><line style="stroke:#181818;stroke-width:1.0;" x1="732.5" x2="732.5" y1="1692.0977" y2="1705.0977"/><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="732.5" y1="1705.0977" y2="1705.0977"/><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="701.5" y1="1705.0977" y2="1701.0977"/><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="701.5" y1="1705.0977" y2="1709.0977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="697.5" y="1687.0317">Identificar qué hay que configurar</text><path d="M925,1671.8984 L925,1711.8984 L1159,1711.8984 L1159,1681.8984 L1149,1671.8984 L925,1671.8984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1149,1671.8984 L1149,1681.8984 L1159,1681.8984 L1149,1671.8984 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213" x="931" y="1688.9653">Decodificamos userRequest.type</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="931" y="1704.0981">en este caso es &quot;cartography&quot;</text><line style="stroke:#181818;stroke-width:1.0;" x1="1485.5" x2="1475.5" y1="1779.1289" y2="1775.1289"/><line style="stroke:#181818;stroke-width:1.0;" x1="1485.5" x2="1475.5" y1="1779.1289" y2="1783.1289"/><line style="stroke:#181818;stroke-width:1.0;" x1="690.5" x2="1486.5" y1="1779.1289" y2="1779.1289"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="697.5" y="1758.9302">Recuperar configuración según</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="697.5" y="1774.063">qué hay que configurar</text><path d="M1492,1722.1641 L1492,1807.1641 L1736,1807.1641 L1736,1732.1641 L1726,1722.1641 L1492,1722.1641 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1726,1722.1641 L1726,1732.1641 L1736,1732.1641 L1726,1722.1641 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="1498" y="1739.231">buscamos información para</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="1498" y="1754.3638">User = username</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="1498" y="1769.4966">Territory = userRequest.terrId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="1498" y="1784.6294">Application = userRequest.appId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="1498" y="1799.7622">Cartography = userRequest.typeId</text><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="701.5" y1="1864.2266" y2="1860.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="701.5" y1="1864.2266" y2="1868.2266"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="690.5" x2="1486.5" y1="1864.2266" y2="1864.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="707.5" y="1828.895">Configuración</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="18" x="707.5" y="1844.0278">sin</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="707.5" y="1859.1606">refinar</text><line style="stroke:#181818;stroke-width:1.0;" x1="690.5" x2="732.5" y1="1923.625" y2="1923.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="732.5" x2="732.5" y1="1923.625" y2="1936.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="732.5" y1="1936.625" y2="1936.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="701.5" y1="1936.625" y2="1932.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="691.5" x2="701.5" y1="1936.625" y2="1940.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="697.5" y="1888.2935">Refinar</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="697.5" y="1903.4263">configuración según</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="697.5" y="1918.5591">qué hay que configurar</text><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="428.5" y1="2082.2539" y2="2078.2539"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="428.5" y1="2082.2539" y2="2086.2539"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="417.5" x2="689.5" y1="2082.2539" y2="2082.2539"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="434.5" y="2077.188">Configuración (JSON)</text><path d="M695,1949.625 L695,2201.625 L1267,2201.625 L1267,1959.625 L1257,1949.625 L695,1949.625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1257,1949.625 L1257,1959.625 L1267,1959.625 L1257,1949.625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="701" y="1966.6919">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="717" y="1981.8247">&quot;type&quot;: &quot;ogc:wms&quot;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="717" y="1996.9575">&quot;payload&quot;: {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="336" x="725" y="2012.0903">&quot;url&quot;: &quot;http://geoserveis.icgc.cat/map/bases/service&quot;,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="445" x="725" y="2027.2231">&quot;override-parameters&quot;: { &quot;LAYERS&quot;: &quot;topogris&quot;, &quot;COD_INE&quot;: &quot;08630&quot; },</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="725" y="2042.356">&quot;exp&quot;: 1300819380,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="725" y="2057.4888">&quot;vary-parameters&quot;: [ &quot;BBOX&quot; ]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="717" y="2072.6216">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="9" x="701" y="2087.7544">}</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="701" y="2102.8872"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="515" x="701" y="2118.02">&quot;override-parameters&quot; quiere decir que debe sustituir o añadir estos parámetros</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="701" y="2133.1528">&quot;exp&quot; es la expiration time del token JWT,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="551" x="701" y="2148.2856">luego esta respuesta debe ser cacheada en el proxy hasta alcanzar el expiration time</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="412" x="701" y="2163.4185">&quot;vary-parameters&quot; es para indicarle al proxy que debe usar esta</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="413" x="701" y="2178.5513">respuesta cacheada si el único cambio es en el parámetro BBOX</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="701" y="2193.6841"> </text><line style="stroke:#181818;stroke-width:1.0;" x1="417.5" x2="459.5" y1="2265.1484" y2="2265.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="459.5" x2="459.5" y1="2265.1484" y2="2278.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="459.5" y1="2278.1484" y2="2278.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="428.5" y1="2278.1484" y2="2274.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="428.5" y1="2278.1484" y2="2282.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="424.5" y="2229.8169">Interpreta la respuesta</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="424.5" y="2244.9497">como una pregunta</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="424.5" y="2260.0825">a un WMS OGC</text><line style="stroke:#181818;stroke-width:1.0;" x1="1705.5" x2="1695.5" y1="2307.2813" y2="2303.2813"/><line style="stroke:#181818;stroke-width:1.0;" x1="1705.5" x2="1695.5" y1="2307.2813" y2="2311.2813"/><line style="stroke:#181818;stroke-width:1.0;" x1="417.5" x2="1706.5" y1="2307.2813" y2="2307.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="424.5" y="2302.2153">GetMap</text><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="428.5" y1="2336.4141" y2="2332.4141"/><line style="stroke:#181818;stroke-width:1.0;" x1="418.5" x2="428.5" y1="2336.4141" y2="2340.4141"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="417.5" x2="1706.5" y1="2336.4141" y2="2336.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="434.5" y="2331.3481">Imagen de mapa pedida</text><line style="stroke:#181818;stroke-width:1.0;" x1="156.5" x2="166.5" y1="2365.5469" y2="2361.5469"/><line style="stroke:#181818;stroke-width:1.0;" x1="156.5" x2="166.5" y1="2365.5469" y2="2369.5469"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="155.5" x2="416.5" y1="2365.5469" y2="2365.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="172.5" y="2360.481">Imagen de mapa pedida</text><line style="stroke:#181818;stroke-width:1.0;" x1="34.5" x2="44.5" y1="2394.6797" y2="2390.6797"/><line style="stroke:#181818;stroke-width:1.0;" x1="34.5" x2="44.5" y1="2394.6797" y2="2398.6797"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="33.5" x2="154.5" y1="2394.6797" y2="2394.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="50.5" y="2389.6138">mapa</text><!--SRC=[hLZDSjj64hxZARfmeUIYH3dU95vMOgyjQHqbjgJIJ-9KbDeQ0YDgTa4CCWF8PbHw61zpo26LMwvyiVsw1m09KfJbhTL196Vwlx_kwPaU7HxHxj7UVXH5AYcjetDVAMTiL2XNciGKAYyf_jvuRAMQ9gfGFYRbQJSpEY-xPCVElf_AhdoZhxxwnudsvQxDIsUpJBjdpxeCsBaquygfqjYSNXmV1D6BgrZyk9mNLNa5QqmYB1VvFWYdT6nDNbxa6wU5C_cOJdLIELDEDqL9bqKOXBuh-9ycWqgwo2ScJJFzJZajt6_QdqoXNTJhsWEZKtsH9uqdYPdz2Rkcf2e4sVmQ5kxqjcl0UMaoawfK-ulysn_EX0EVlEoxb8rxBB3KxzSwtlogoQ9KbMgalARuvHwT7fozEJyKkhrwlQlbXpUdT3pxQvIPn8PCL_mTotVGENEjqfgClvUQwV3dz2NPQzsYhL_3gTzgfI5ZAD7UCkmoEpOvJId4SvjC3aKgYt9RwY2euL-9vci5wakHqd2d-hhIMSaRILPDTPzWkY8skQXTyxGn9Myc9aEA_MRaApe_UTrigpvi4PuCbC8NN5rYeofNmZVx2mOhYeGdKQaYhzqrVB3qIwKXoYigK64weqUF2gcTEU0UFOA1sjaea482o1BnLvFshH9uMELYJMxTH6NRaSvJuX0XudMWQUlPipfMGphHbx0ITd5LHs6rGx2ht5Y9_0GK2mgQC8K4E3E-AYFAzJiwcAYnVgscsctSH8G_RokNwE5y4-pr5b7biY7rhigoyCF1e10asMtj1mcWPCTE5LVJmHUzVatEla_ya6vwhr_yk7zosWDpQaRgSP__VoR_d_Hk6t8EiNPdqmBgUsDjm-zQskqcV_9_V1moF4QQrEmFbHedMOMosOU9HlLxwg72tK7QGzPxgYZu6xYcAYIlqgdE4MVaebGE7YEJfO2XJccRQwSdjhJRu3rJay8cIseX9UDGZtIYGvRFx7yqbpquzZCg-HTBctqWCqQIeOIPbf8Iq58ZvTgmJO3KADCJvI58Du9WSOayQ_42whtHayBfRVRjjFQhjStRp8821i8jpNLkSs0FBiy-v0GACqQRygGo4loonRuCjGSmIhkhHS81fa5mM0WNGnsdq3MfspGXQA9JenZiSFHQPI0UMPjf1GUKjsW428FYqA4AOFqSzGkGRjlKa5xfyeqgegXTegr5q0jAy-QmWxCf7Fkawa1HbTnuJTeja6DOpWdk-8TG84bg8jNiT696KCVOyi21f2QYja8uieCl1vzt2kIp9zm543yuNl0HLfjoz6fNp64PeULTwwYsDt1VpdvN0IUygWfkRPmJslXo4rXdr1i-hYnjVBx9kDWJkAPwClk0lkE1h529NwVwKbLP6OJPKGbOkKo19M8O04msTQoCSy_TQ_PdQiRs_z0praJa_fuHZFsqHX5nMRoeNNzWsJAmEVeStP7AKzxsV9hH5LT6Yd2dTX6nYu1bprgmBiBerVuPrOxVI3Uw7TmWLU4JJjGV-Fty1X0-bWZSHZBnoEp1H-EGNcgSBMxUOkPb4uQthTQ6tIvWuIzWSgMVOsH4ohzHqm2gBjNrx0CFBe0qS8BcquO9d8ZaHtHiV7jwTBX9NzEfGcAbAp3ZncOKwGmXFEGGJfTrtgbhGTcpbV500jnP1FbYiEduw1JXLeKP16M3fhrzOpsQm4WbY5-Ats-tl2adLRvL18_c8-9tcka3W6DEJOpf9WwvYllpvOEKDvhaDHjoz8GDINAzBfcNvO21UXadrfMLzHWuQQHB5MZmU-6eSK_KmYD0lL79aAXjhD5n6_CE5mAV80rIQ7LKvo2l6ws7Ka9hDeLpUQmUaWpWgZvomd6mJBI6inD_6SLnLAJg-NA2STWPFWk1AbIzkUH1xMyxZ-ayLtN1wBJhz9q6B8tLGyWhD-1iy5LituW56d6VVZe-ENhxuy-RctTAko-67ulWYXb9-CB-8KzybNWkvtk7x7wT2q9mHwmmTt_4YFM2cWYxLkH57cJMimZkToJ1MKtJPFPRQTFEcH-l56PCzH629ZiVDrIIy35kMIitw4Kj9EF7whaih7N8_YUOt1kYrKOqrgNqgSxEnZdCFz4uH7ovkHgIXTrm4y3P-szT1ZzvnZ9Qxex341NkB7qA_QLFeLNqANIOFaaV2NUXq2lwOL1yGCKtDz8XVQ-uwxjwn0oZQxDRprahdiiHH4VVVLpw_diq0-Gphk1u3ZDZf2dx96LprdNgLdaEKivZmEqlrUmtENluO6yXusWrENiwiQbmJInFIssgjZa3GWAhDOz72J3D2OmNffZu0N5lRijybqigZFsXi1PX30pZzdcHhx5xrUnHvOF5tT6T1xiMSpYOcp3AsbazAKxhZTPHWPQGl2Xal9I7dYwHu4veTkVUBmiIp7OZqZuLhCdqxjBZYpVuv_IboSNj1-R-930il-Ky8AwzLGttDyTbWyFLevw58Zb-U-kRoiE2i2ppRXll6ygYLSZC1uemtg3Ax3WPlfluk3_VAjGqiogD5mSGB6EWPmQUw37GD-EtyTic6IVRy7E0AMN0YVQ3S9FM2r8XWDz_qANrriAK0nqKXucVXPUuROwTWJaKxnxj_UlWS9-NTvv-yMGdfjkEEFs-mDxZ9pixJn___SdJdSxcjNBJhfwVA7xvykXjJ3-tTBTXcegYjUO1B4OxlfObnjKNDDmeVELBKrPOilFRXI-xhn5HQoLt39nR-6hg5zJIJ7It8_P3qMQL7eS72hwT5fLy2pfHpJ8eyqLSo-aO7g2k5DEeB57vhqfkRKkAeZiZmaP9imZt6uTfl7aJc3igLqUnGOJCJMejyOOrohiPJZCr6HbfaBM1RJI8OnyjzWM-nyolC2sK3p1jE5orItaeQ1LoMK-it5-mEQvoNbBDHHutw8wavWcplPRDbpfrS_SJGYtfuMyDJ5c_sms5uBy0]--></g></svg>